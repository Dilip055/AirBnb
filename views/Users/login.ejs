<% layout('/layouts/boilerplate.ejs') -%>
<body class="bg-light">
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow-lg">
          <div class="card-body p-5">
            <h2 class="text-center mb-4">Welcome Back to Airbnb</h2>
            <form id="loginForm" action="/users/login" method="POST" novalidate>
              <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="text" name="username" class="form-control" id="username" placeholder="Enter your username" required>
                <div class="invalid-feedback">Username must be at least 3 characters long.</div>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" name="password" class="form-control" id="password" placeholder="Enter your password" required>
                <div class="invalid-feedback">Password cannot be empty.</div>
              </div>
              <button type="submit" class="btn btn-danger w-100">Log In</button>
              <p class="mt-3 text-center">Don't have an account? <a href="/users/register">Sign up</a></p>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

 

  <!-- Custom validation script -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("loginForm");

      form.addEventListener("submit", function (e) {
        let valid = true;

        // Validate username
        const username = document.getElementById("username");
        if (username.value.trim().length < 3) {
          username.classList.add("is-invalid");
          valid = false;
        } else {
          username.classList.remove("is-invalid");
          username.classList.add("is-valid");
        }

        // Validate password
        const password = document.getElementById("password");
        if (password.value.trim() === "") {
          password.classList.add("is-invalid");
          valid = false;
        } else {
          password.classList.remove("is-invalid");
          password.classList.add("is-valid");
        }

        if (!valid) {
          e.preventDefault();
        }
      });

      // Live blur validation
      document.getElementById("username").addEventListener("blur", function () {
        const username = this;
        if (username.value.trim().length < 3) {
          username.classList.add("is-invalid");
        } else {
          username.classList.remove("is-invalid");
          username.classList.add("is-valid");
        }
      });

      document.getElementById("password").addEventListener("blur", function () {
        const password = this;
        if (password.value.trim() === "") {
          password.classList.add("is-invalid");
        } else {
          password.classList.remove("is-invalid");
          password.classList.add("is-valid");
        }
      });
    });
  </script>
</body>
